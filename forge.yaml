agents:
  - id: title
    model: anthropic/claude-3.5-haiku
    tools:
      - forge_tool_event_dispatch
    subscribe:
      - user_task
    max_turns: 1
    system_prompt: "{{> title-generator.hbs }}"
    user_prompt: <technical_content>{{event.value}}</technical_content>
  - id: developer
    model: anthropic/claude-3.5-sonnet
    tools:
      - tool_forge_fs_read
      - tool_forge_fs_create
      - tool_forge_fs_remove
      - tool_forge_fs_patch
      - tool_forge_process_shell
      - tool_forge_net_fetch
      - tool_forge_fs_search
    subscribe:
      - user_task
    ephemeral: false
    transforms:
      - type: user
        agent_id: knowledge_recall
        output: learnings
    system_prompt: "{{> software-engineer.hbs }}"
    user_prompt: <task>{{event.value}}</task>
  - id: knowledge_store
    model: anthropic/claude-3.5-sonnet
    tools:
      - forge_tool_knowledge_set
    subscribe:
      - user_task
    system_prompt: "{{> knowledge-storage.hbs }}"
    user_prompt: <feedback>{{event.value}}</feedback>
  - id: knowledge_recall
    model: anthropic/claude-3.5-sonnet
    tools:
      - forge_tool_knowledge_get
      - forge_tool_event_dispatch
    subscribe: []
    system_prompt: "{{> knowledge-recall.hbs }}"
    user_prompt: "{{event.value}}"