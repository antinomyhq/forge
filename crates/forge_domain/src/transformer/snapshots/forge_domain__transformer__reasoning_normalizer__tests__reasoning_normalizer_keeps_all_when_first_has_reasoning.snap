---
source: crates/forge_domain/src/transformer/reasoning_normalizer.rs
expression: snapshot
---
transformation: ReasoningNormalizer_first_has_reasoning
before:
  messages:
    - message:
        text:
          role: User
          content: User question
    - message:
        text:
          role: Assistant
          content: First assistant response with reasoning
          reasoning_details:
            - text: I need to think about this carefully
              signature: ~
              data: ~
              id: ~
              format: ~
              index: ~
              type_of: ~
    - message:
        text:
          role: User
          content: Follow-up question
    - message:
        text:
          role: Assistant
          content: Second assistant response with reasoning
          reasoning_details:
            - text: I need to think about this carefully
              signature: ~
              data: ~
              id: ~
              format: ~
              index: ~
              type_of: ~
    - message:
        text:
          role: Assistant
          content: Third assistant without reasoning
  reasoning:
    enabled: true
after:
  messages:
    - message:
        text:
          role: User
          content: User question
    - message:
        text:
          role: Assistant
          content: First assistant response with reasoning
          reasoning_details:
            - text: I need to think about this carefully
              signature: ~
              data: ~
              id: ~
              format: ~
              index: ~
              type_of: ~
    - message:
        text:
          role: User
          content: Follow-up question
    - message:
        text:
          role: Assistant
          content: Second assistant response with reasoning
          reasoning_details:
            - text: I need to think about this carefully
              signature: ~
              data: ~
              id: ~
              format: ~
              index: ~
              type_of: ~
    - message:
        text:
          role: Assistant
          content: Third assistant without reasoning
  reasoning:
    enabled: true
