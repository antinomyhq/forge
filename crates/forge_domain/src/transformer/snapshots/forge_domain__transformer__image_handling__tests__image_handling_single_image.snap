---
source: crates/forge_domain/src/transformer/image_handling.rs
expression: snapshot
---
transformation: ImageHandling
before:
  messages:
    - message:
        text:
          role: User
          content: User message
    - message:
        tool:
          name: image_tool_1
          call_id: call_1
          output:
            is_error: false
            values:
              - image:
                  url: "data:image/png;base64,image1_data"
                  mime_type: image/png
    - message:
        tool:
          name: image_tool_2
          call_id: call_2
          output:
            is_error: false
            values:
              - image:
                  url: "data:image/jpeg;base64,image2_data"
                  mime_type: image/jpeg
after:
  messages:
    - message:
        text:
          role: User
          content: User message
    - message:
        tool:
          name: image_tool_1
          call_id: call_1
          output:
            is_error: false
            values:
              - text: "[The image with ID 0 will be sent as an attachment in the next message]"
    - message:
        tool:
          name: image_tool_2
          call_id: call_2
          output:
            is_error: false
            values:
              - text: "[The image with ID 1 will be sent as an attachment in the next message]"
    - message:
        text:
          role: User
          content: "[Here is the image attachment for ID 0]"
    - message:
        image:
          url: "data:image/png;base64,image1_data"
          mime_type: image/png
    - message:
        text:
          role: User
          content: "[Here is the image attachment for ID 1]"
    - message:
        image:
          url: "data:image/jpeg;base64,image2_data"
          mime_type: image/jpeg
