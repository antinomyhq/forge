# Task: Support for Custom Commands (Issue #409)

## Overview

This task implements support for custom dispatch commands using the `/dispatch-event_name value` syntax, as requested in issue #409.

## Implementation Details

The following changes were made to implement the feature:

1. **Command Enum Extension**:
   - Added a new `Command::Dispatch(String, String)` variant to the `Command` enum in `crates/forge_main/src/model.rs`
   - The first String represents the event name, the second represents the event value

2. **Command Parsing**:
   - Updated the command parsing logic to recognize the `/dispatch-` prefix
   - Implemented parsing to extract the event name and value according to the specification
   - The parser handles cases with and without values correctly

3. **API Extension**:
   - Added a new `dispatch` method to the `API` trait in `crates/forge_api/src/lib.rs`
   - Implemented the method in `ForgeAPI` in `crates/forge_api/src/api.rs`
   - The implementation creates a new event with the provided name and value and forwards to the existing chat method

4. **UI Handling**:
   - Updated the UI to handle the new `Dispatch` command variant in `crates/forge_main/src/ui.rs`
   - Added a `handle_dispatch_command` method to process these commands

5. **Test Coverage**:
   - Added unit tests for command parsing in `crates/forge_main/src/model.rs`
   - Tests cover basic dispatch commands, commands without values, and commands with values containing spaces
   - Also verified that our changes don't break handling of standard commands

6. **Documentation**:
   - Created a comprehensive documentation file in `CUSTOM_COMMANDS.md` explaining the feature and providing usage examples

## Command Format

The implemented command format follows these rules:
- Format: `/dispatch-event_name value`
- The event name is everything after `/dispatch-` up to the first space
- The event value is everything after the first space (if any)
- If there's no space, the event value is empty
- Event names can contain alphanumeric characters, underscores, and hyphens
- Values preserve spaces exactly as entered

## Testing

- The implementation successfully passes all tests
- Manual testing confirms that the command handling works as expected
- Existing functionality is preserved

## Future Enhancements

Potential future improvements could include:
- Tab completion support for common dispatch event names
- Help system showing available dispatch commands
- Registration mechanism for event handlers tied to specific event names
