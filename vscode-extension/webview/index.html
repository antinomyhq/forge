<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src {{cspSource}} 'unsafe-inline'; script-src 'nonce-{{nonce}}'; font-src {{cspSource}};">
    <link rel="stylesheet" href="{{styleUri}}">
    <title>ForgeCode Chat</title>
</head>
<body>
    <!-- Main container with grid layout -->
    <div class="chat-container">
        <!-- Header with task info -->
        <div class="chat-header">
            <div class="header-info">
                <span class="header-item">
                    <span class="codicon codicon-person"></span>
                    <span id="agent-name">Forge</span>
                </span>
                <span class="header-separator">|</span>
                <span class="header-item">
                    <span class="codicon codicon-circuit-board"></span>
                    <span id="model-name">Claude 3.5 Sonnet</span>
                </span>
            </div>
            <div class="header-stats">
                <span class="header-item" id="token-count">0 / 200K tokens</span>
                <span class="header-separator">|</span>
                <span class="header-item" id="cost-display">$0.00</span>
            </div>
        </div>

        <!-- Messages container -->
        <div class="messages-container" id="messages">
            <!-- Welcome screen (shown when no messages) -->
            <div class="welcome-screen" id="welcome">
                <div class="welcome-logo">
                    <span class="codicon codicon-sparkle"></span>
                </div>
                <h2>Welcome to ForgeCode</h2>
                <p>Start a conversation to get help with your code.</p>
                <div class="recent-tasks" id="recent-tasks">
                    <!-- Recent tasks will be populated here -->
                </div>
            </div>

            <!-- Messages will be appended here dynamically -->
        </div>

        <!-- Input area -->
        <div class="input-container">
            <div class="input-wrapper">
                <textarea 
                    id="message-input" 
                    class="message-input" 
                    placeholder="Ask ForgeCode anything..."
                    rows="1"
                ></textarea>
                <button id="send-button" class="send-button" title="Send message (Ctrl+Enter)">
                    <span class="codicon codicon-send"></span>
                </button>
            </div>
            <div class="input-footer">
                <span class="input-hint">Press Ctrl+Enter to send</span>
                <span id="char-counter" class="char-counter">0</span>
            </div>
        </div>
    </div>

    <script nonce="{{nonce}}" src="{{scriptUri}}"></script>
</body>
</html>
